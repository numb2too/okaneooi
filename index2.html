<!DOCTYPE html>
<html lang="zh-TW">

<script src="js/bikeJson.js"></script>
<script src="js/bikeRoute/totalRoutes.js"></script>

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>自行車路線分享</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
    <style>
        #map {
            height: 600px;
        }
    </style>
</head>

<body>

    <h2>點擊路線觀看 YouTube 騎乘影片</h2>
    <div id="map"></div>

    <script>
        // 初始化地圖（中心點：台中清水區）
        var map = L.map('map').setView([24.267, 120.497], 13);

        // 加入 OpenStreetMap 圖層
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            attribution: '&copy; OpenStreetMap contributors'
        }).addTo(map);

        // 定義自行車路線 (經緯度座標)
        var routeCoords = [
            [24.266, 120.496], // 起點
            [24.270, 120.498], // 中間點
            [24.275, 120.502]  // 終點
        ];

        var routes = [
            { coords: [[24.266, 120.496], [24.270, 120.498], [24.275, 120.502]], video: "https://www.youtube.com/watch?v=abc123" },
            { coords: [[24.260, 120.490], [24.265, 120.495], [24.270, 120.500]], video: "https://www.youtube.com/watch?v=xyz789" }
        ];
        var marker = L.marker([24.270, 120.498]).addTo(map)
            .bindPopup("這裡是補給站！");

        routes.forEach(routeData => {
            var route = L.polyline(routeData.coords, { color: 'blue', weight: 5 }).addTo(map);
            route.on('click', function () {
                window.open(routeData.video, '_blank');
            });
        });


        L.geoJSON(geojsonData, {
            style: { color: 'blue', weight: 5 },
            onEachFeature: function (feature, layer) {
                if (feature.properties && feature.properties.youtube) {
                    layer.bindPopup(`<b>${feature.properties.name}</b><br><a href="${feature.properties.youtube}" target="_blank">觀看影片</a>`);
                }
            }
        }).addTo(map);

    </script>

</body>

</html>